{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import{useNavigate}from'react-router-dom';import*as XLSX from'xlsx';// Importar la librería XLSX\nimport logo from'../img/ESLOGAN CONI.png';import'../App.css';// Asegúrate de que tus estilos CSS estén aquí\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const InformeModulo=()=>{const navigate=useNavigate();// --- ESTADOS PARA LA INFORMACIÓN DEL USUARIO ---\nconst[currentUser,setCurrentUser]=useState(null);const[cargandoUsuario,setCargandoUsuario]=useState(true);// --- ESTADOS PARA EL INFORME ACTUAL ---\nconst[reportData,setReportData]=useState([]);const[cargandoReporte,setCargandoReporte]=useState(false);const[errorReporte,setErrorReporte]=useState('');const[filterStatus,setFilterStatus]=useState('all');// Filtro de estado para el informe actual\n// --- ESTADOS PARA INFORMES HISTÓRICOS ---\nconst[historicalReports,setHistoricalReports]=useState([]);const[cargandoHistorico,setCargandoHistorico]=useState(false);const[errorHistorico,setErrorHistorico]=useState('');const[selectedHistoricalReportData,setSelectedHistoricalReportData]=useState(null);// Para ver un informe histórico completo\nconst[isHistoricalModalOpen,setIsHistoricalModalOpen]=useState(false);// Opciones de estado de asignación para el filtro (basadas en equipos_perifericos.estado)\nconst assignmentStatusOptions=[{value:'all',label:'Todos los Estados'},{value:'ASIGNADO',label:'Asignado'},{value:'DISPONIBLE',label:'Disponible'},{value:'PENDIENTE',label:'Pendiente'}// Puedes añadir más estados si los tienes en tu DB para equipos_perifericos.estado\n];// --- EFECTO PARA OBTENER Y VERIFICAR EL USUARIO AUTENTICADO ---\nuseEffect(()=>{const storedUserJSON=localStorage.getItem(\"usuarioLogueado\");if(storedUserJSON){try{const usuario=JSON.parse(storedUserJSON);// Usamos las propiedades del objeto JSON para verificar la sesión\nconst id=usuario.idUsuario||usuario.id;const rol=usuario.rolAutenticacion;const cargo=usuario.cargoEmpleado;if(id&&rol&&cargo){setCurrentUser({id,rol,cargo});// REGLA: Este módulo es solo para Administradores.\nif(rol!=='admin'){console.warn(\"InformeModulo: Rol (\".concat(rol,\") sin permiso. Redirigiendo a inicio.\"));navigate(\"/\");}}else{console.warn(\"InformeModulo: Información de usuario incompleta. Redirigiendo a inicio.\");navigate(\"/\");}}catch(e){console.error(\"Error al parsear datos del usuario de localStorage:\",e);navigate(\"/\");}}else{console.warn(\"InformeModulo: No se encontró 'usuarioLogueado' en localStorage. Redirigiendo a inicio.\");navigate(\"/\");}setCargandoUsuario(false);},[navigate]);// --- FUNCIÓN PARA OBTENER EL INFORME DE INVENTARIO ACTUAL ---\nconst fetchCurrentReport=useCallback(async()=>{if(!(currentUser!==null&&currentUser!==void 0&&currentUser.id))return;setCargandoReporte(true);setErrorReporte('');try{const queryParams=new URLSearchParams();if(filterStatus!=='all'){queryParams.append('filterStatus',filterStatus);}const url=\"http://localhost:8080/CONI/api/informes/inventario?\".concat(queryParams.toString());const response=await fetch(url,{credentials:'include'});if(!response.ok){const errorData=await response.json();throw new Error(\"HTTP error! status: \".concat(response.status,\", Mensaje: \").concat(errorData.mensaje||'Error desconocido'));}const data=await response.json();setReportData(data);}catch(err){console.error('Error al obtener el informe actual:',err);setErrorReporte(\"No se pudo cargar el informe: \".concat(err.message,\".\"));}finally{setCargandoReporte(false);}},[currentUser===null||currentUser===void 0?void 0:currentUser.id,filterStatus]);// --- FUNCIÓN PARA OBTENER LA LISTA DE INFORMES HISTÓRICOS ---\nconst fetchHistoricalReports=useCallback(async()=>{if(!(currentUser!==null&&currentUser!==void 0&&currentUser.id))return;setCargandoHistorico(true);setErrorHistorico('');try{const url=\"http://localhost:8080/CONI/api/informes/historico\";const response=await fetch(url,{credentials:'include'});if(!response.ok){const errorData=await response.json();throw new Error(\"HTTP error! status: \".concat(response.status,\", Mensaje: \").concat(errorData.mensaje||'Error desconocido'));}const data=await response.json();setHistoricalReports(data);}catch(err){console.error('Error al obtener informes históricos:',err);setErrorHistorico(\"No se pudieron cargar los informes hist\\xF3ricos: \".concat(err.message,\".\"));}finally{setCargandoHistorico(false);}},[currentUser===null||currentUser===void 0?void 0:currentUser.id]);// --- EFECTO PARA CARGAR EL INFORME ACTUAL Y LOS HISTÓRICOS AL MONTAR/CAMBIAR FILTRO ---\nuseEffect(()=>{if(currentUser){fetchCurrentReport();fetchHistoricalReports();}},[currentUser,fetchCurrentReport,fetchHistoricalReports]);// --- FUNCIÓN PARA GUARDAR Y DESCARGAR EL INFORME ACTUAL ---\nconst handleGenerateAndDownload=async()=>{if(reportData.length===0){alert(\"No hay datos para generar el informe.\");return;}// 1. Guardar el informe en la base de datos\ntry{const reportToSave={estadoFiltro:filterStatus,reporteJson:JSON.stringify(reportData)// Convertir el array de objetos a una cadena JSON\n};const response=await fetch('http://localhost:8080/CONI/api/informes/guardar',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(reportToSave),credentials:'include'});const data=await response.json();if(response.ok){alert(data.mensaje);fetchHistoricalReports();// Recargar la lista de informes históricos\n}else{alert(\"Error al guardar informe: \".concat(data.mensaje||'Ocurrió un error desconocido.'));}}catch(error){console.error('Error al guardar el informe:',error);alert('Error de conexión con el servidor al guardar el informe.');}// 2. Descargar el informe como Excel\nexportToExcel(reportData,\"Informe_Inventario_\".concat(filterStatus,\"_\").concat(new Date().toISOString().slice(0,10)));};// --- FUNCIÓN PARA DESCARGAR UN INFORME HISTÓRICO ESPECÍFICO ---\nconst handleDownloadHistorical=async(reportId,filename)=>{if(!(currentUser!==null&&currentUser!==void 0&&currentUser.id)){alert(\"Usuario no autenticado.\");return;}try{const url=\"http://localhost:8080/CONI/api/informes/historico?id=\".concat(reportId);const response=await fetch(url,{credentials:'include'});if(!response.ok){const errorData=await response.json();throw new Error(\"HTTP error! status: \".concat(response.status,\", Mensaje: \").concat(errorData.mensaje||'Error desconocido'));}const data=await response.json();// Esto ya debería ser el JSON del reporte\nexportToExcel(data,filename);}catch(err){console.error('Error al descargar informe histórico:',err);alert(\"No se pudo descargar el informe hist\\xF3rico: \".concat(err.message,\".\"));}};// --- FUNCIÓN PARA EXPORTAR DATOS A EXCEL ---\nconst exportToExcel=(data,filename)=>{const ws=XLSX.utils.json_to_sheet(data);const wb=XLSX.utils.book_new();XLSX.utils.book_append_sheet(wb,ws,\"Informe\");XLSX.writeFile(wb,\"\".concat(filename,\".xlsx\"));};// --- FUNCIÓN PARA VER DETALLES DE UN INFORME HISTÓRICO EN UN MODAL ---\nconst handleViewHistorical=async reportId=>{if(!(currentUser!==null&&currentUser!==void 0&&currentUser.id)){alert(\"Usuario no autenticado.\");return;}try{const url=\"http://localhost:8080/CONI/api/informes/historico?id=\".concat(reportId);const response=await fetch(url,{credentials:'include'});if(!response.ok){const errorData=await response.json();throw new Error(\"HTTP error! status: \".concat(response.status,\", Mensaje: \").concat(errorData.mensaje||'Error desconocido'));}const data=await response.json();// Esto ya debería ser el JSON del reporte\nsetSelectedHistoricalReportData(data);setIsHistoricalModalOpen(true);}catch(err){console.error('Error al ver informe histórico:',err);alert(\"No se pudo cargar el informe hist\\xF3rico: \".concat(err.message,\".\"));}};const handleCloseHistoricalModal=()=>{setIsHistoricalModalOpen(false);setSelectedHistoricalReportData(null);};// --- FUNCIÓN PARA CERRAR SESIÓN ---\nconst handleLogout=async()=>{try{const response=await fetch(\"http://localhost:8080/CONI/LogoutServlet\",{method:\"GET\",credentials:\"include\"});if(response.ok){localStorage.removeItem(\"usuarioLogueado\");localStorage.removeItem(\"rol\");localStorage.removeItem(\"idUsuario\");localStorage.removeItem(\"cargoEmpleado\");sessionStorage.clear();localStorage.setItem(\"logoutMessage\",\"Sesión cerrada exitosamente\");navigate(\"/\");}else{console.error(\"Error al cerrar sesión, status:\",response.status);}}catch(error){console.error(\"Error al cerrar sesión\",error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"informe-modulo\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"encabezado\",children:[/*#__PURE__*/_jsx(\"img\",{src:logo,className:\"imagen-encabezado\",alt:\"Logo CONI\"}),/*#__PURE__*/_jsx(\"div\",{className:\"barra-superior\",children:/*#__PURE__*/_jsx(\"nav\",{children:/*#__PURE__*/_jsx(\"ul\",{children:/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,children:\"Cerrar sesi\\xF3n\"})})})})})]}),/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Generar Informes\"}),cargandoUsuario?/*#__PURE__*/_jsx(\"p\",{children:\"Cargando informaci\\xF3n del usuario...\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"filtros-container\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"filterStatus\",children:\"Filtrar por Estado:\"}),/*#__PURE__*/_jsx(\"select\",{id:\"filterStatus\",value:filterStatus,onChange:e=>setFilterStatus(e.target.value),children:assignmentStatusOptions.map(option=>/*#__PURE__*/_jsx(\"option\",{value:option.value,children:option.label},option.value))}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchCurrentReport,children:\"Actualizar Reporte\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"seccion-informe\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Informe de Inventario Actual\"}),cargandoReporte&&/*#__PURE__*/_jsx(\"p\",{children:\"Cargando reporte...\"}),errorReporte&&/*#__PURE__*/_jsx(\"p\",{className:\"error-mensaje\",children:errorReporte}),!cargandoReporte&&!errorReporte&&reportData.length===0&&/*#__PURE__*/_jsx(\"p\",{children:\"No hay datos disponibles para el informe actual con los filtros seleccionados.\"}),!cargandoReporte&&reportData.length>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"table\",{className:\"tabla-reporte\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Categor\\xEDa\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Tipo\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Marca\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Serial\"}),/*#__PURE__*/_jsx(\"th\",{children:\"RAM\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Disco\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Procesador\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Estado Asignaci\\xF3n\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Asignado A\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Fecha Asignaci\\xF3n\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:reportData.map(item=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:item.id}),/*#__PURE__*/_jsx(\"td\",{children:item.categoria}),/*#__PURE__*/_jsx(\"td\",{children:item.tipo}),/*#__PURE__*/_jsx(\"td\",{children:item.marca}),/*#__PURE__*/_jsx(\"td\",{children:item.serial}),/*#__PURE__*/_jsx(\"td\",{children:item.ram||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:item.disco||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:item.procesador||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:item.estadoAsignacion}),/*#__PURE__*/_jsx(\"td\",{children:item.asignadoA}),/*#__PURE__*/_jsx(\"td\",{children:item.fechaAsignacion?new Date(item.fechaAsignacion).toLocaleString():'N/A'})]},\"\".concat(item.categoria,\"-\").concat(item.id)))})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleGenerateAndDownload,className:\"btn-descargar\",children:\"Generar y Descargar Excel\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"seccion-historico\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Informes Hist\\xF3ricos Guardados\"}),cargandoHistorico&&/*#__PURE__*/_jsx(\"p\",{children:\"Cargando informes hist\\xF3ricos...\"}),errorHistorico&&/*#__PURE__*/_jsx(\"p\",{className:\"error-mensaje\",children:errorHistorico}),!cargandoHistorico&&historicalReports.length===0&&/*#__PURE__*/_jsx(\"p\",{children:\"No hay informes hist\\xF3ricos guardados.\"}),!cargandoHistorico&&historicalReports.length>0&&/*#__PURE__*/_jsx(\"ul\",{className:\"lista-historicos\",children:historicalReports.map(reporte=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"ID:\"}),\" \",reporte.id]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Fecha Guardado:\"}),\" \",new Date(reporte.fechaGuardado).toLocaleString()]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Estado de Filtro:\"}),\" \",reporte.estadoFiltro]}),/*#__PURE__*/_jsxs(\"div\",{className:\"acciones-historico\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleViewHistorical(reporte.id),children:\"Ver Reporte\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDownloadHistorical(reporte.id,\"Informe_Historico_\".concat(reporte.id)),children:\"Descargar Excel\"})]})]},reporte.id))})]}),isHistoricalModalOpen&&selectedHistoricalReportData&&/*#__PURE__*/_jsx(\"div\",{className:\"modal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Detalles del Informe Hist\\xF3rico\"}),/*#__PURE__*/_jsx(\"div\",{className:\"tabla-modal-wrapper\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"tabla-modal\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Categor\\xEDa\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Tipo\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Marca\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Serial\"}),/*#__PURE__*/_jsx(\"th\",{children:\"RAM\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Disco\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Procesador\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Estado Asignaci\\xF3n\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Asignado A\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Fecha Asignaci\\xF3n\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:selectedHistoricalReportData.map(item=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:item.id}),/*#__PURE__*/_jsx(\"td\",{children:item.categoria}),/*#__PURE__*/_jsx(\"td\",{children:item.tipo}),/*#__PURE__*/_jsx(\"td\",{children:item.marca}),/*#__PURE__*/_jsx(\"td\",{children:item.serial}),/*#__PURE__*/_jsx(\"td\",{children:item.ram||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:item.disco||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:item.procesador||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:item.estadoAsignacion}),/*#__PURE__*/_jsx(\"td\",{children:item.asignadoA}),/*#__PURE__*/_jsx(\"td\",{children:item.fechaAsignacion?new Date(item.fechaAsignacion).toLocaleString():'N/A'})]},\"\".concat(item.categoria,\"-\").concat(item.id)))})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-actions\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-cancelar\",onClick:handleCloseHistoricalModal,children:\"Cerrar\"})})]})})]})]})]});};export default InformeModulo;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useNavigate","XLSX","logo","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","InformeModulo","navigate","currentUser","setCurrentUser","cargandoUsuario","setCargandoUsuario","reportData","setReportData","cargandoReporte","setCargandoReporte","errorReporte","setErrorReporte","filterStatus","setFilterStatus","historicalReports","setHistoricalReports","cargandoHistorico","setCargandoHistorico","errorHistorico","setErrorHistorico","selectedHistoricalReportData","setSelectedHistoricalReportData","isHistoricalModalOpen","setIsHistoricalModalOpen","assignmentStatusOptions","value","label","storedUserJSON","localStorage","getItem","usuario","JSON","parse","id","idUsuario","rol","rolAutenticacion","cargo","cargoEmpleado","console","warn","concat","e","error","fetchCurrentReport","queryParams","URLSearchParams","append","url","toString","response","fetch","credentials","ok","errorData","json","Error","status","mensaje","data","err","message","fetchHistoricalReports","handleGenerateAndDownload","length","alert","reportToSave","estadoFiltro","reporteJson","stringify","method","headers","body","exportToExcel","Date","toISOString","slice","handleDownloadHistorical","reportId","filename","ws","utils","json_to_sheet","wb","book_new","book_append_sheet","writeFile","handleViewHistorical","handleCloseHistoricalModal","handleLogout","removeItem","sessionStorage","clear","setItem","className","children","src","alt","onClick","htmlFor","onChange","target","map","option","item","categoria","tipo","marca","serial","ram","disco","procesador","estadoAsignacion","asignadoA","fechaAsignacion","toLocaleString","reporte","fechaGuardado","type"],"sources":["C:/Users/Lenovo/OneDrive/Documentos/SENA/CONI_FUNCIONES 10 NOV/frontend/src/components/InformeModulo.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport * as XLSX from 'xlsx'; // Importar la librería XLSX\nimport logo from '../img/ESLOGAN CONI.png';\nimport '../App.css'; // Asegúrate de que tus estilos CSS estén aquí\n\nconst InformeModulo = () => {\n    const navigate = useNavigate();\n\n    // --- ESTADOS PARA LA INFORMACIÓN DEL USUARIO ---\n    const [currentUser, setCurrentUser] = useState(null);\n    const [cargandoUsuario, setCargandoUsuario] = useState(true);\n\n    // --- ESTADOS PARA EL INFORME ACTUAL ---\n    const [reportData, setReportData] = useState([]);\n    const [cargandoReporte, setCargandoReporte] = useState(false);\n    const [errorReporte, setErrorReporte] = useState('');\n    const [filterStatus, setFilterStatus] = useState('all'); // Filtro de estado para el informe actual\n\n    // --- ESTADOS PARA INFORMES HISTÓRICOS ---\n    const [historicalReports, setHistoricalReports] = useState([]);\n    const [cargandoHistorico, setCargandoHistorico] = useState(false);\n    const [errorHistorico, setErrorHistorico] = useState('');\n    const [selectedHistoricalReportData, setSelectedHistoricalReportData] = useState(null); // Para ver un informe histórico completo\n    const [isHistoricalModalOpen, setIsHistoricalModalOpen] = useState(false);\n\n    // Opciones de estado de asignación para el filtro (basadas en equipos_perifericos.estado)\n    const assignmentStatusOptions = [\n        { value: 'all', label: 'Todos los Estados' },\n        { value: 'ASIGNADO', label: 'Asignado' },\n        { value: 'DISPONIBLE', label: 'Disponible' },\n        { value: 'PENDIENTE', label: 'Pendiente' },\n        // Puedes añadir más estados si los tienes en tu DB para equipos_perifericos.estado\n    ];\n\n    // --- EFECTO PARA OBTENER Y VERIFICAR EL USUARIO AUTENTICADO ---\n    useEffect(() => {\n        const storedUserJSON = localStorage.getItem(\"usuarioLogueado\");\n\n        if (storedUserJSON) {\n            try {\n                const usuario = JSON.parse(storedUserJSON);\n\n                // Usamos las propiedades del objeto JSON para verificar la sesión\n                const id = usuario.idUsuario || usuario.id;\n                const rol = usuario.rolAutenticacion;\n                const cargo = usuario.cargoEmpleado;\n\n                if (id && rol && cargo) {\n                    setCurrentUser({ id, rol, cargo });\n\n                    // REGLA: Este módulo es solo para Administradores.\n                    if (rol !== 'admin') {\n                        console.warn(`InformeModulo: Rol (${rol}) sin permiso. Redirigiendo a inicio.`);\n                        navigate(\"/\");\n                    }\n                } else {\n                    console.warn(\"InformeModulo: Información de usuario incompleta. Redirigiendo a inicio.\");\n                    navigate(\"/\");\n                }\n            } catch (e) {\n                console.error(\"Error al parsear datos del usuario de localStorage:\", e);\n                navigate(\"/\");\n            }\n        } else {\n            console.warn(\"InformeModulo: No se encontró 'usuarioLogueado' en localStorage. Redirigiendo a inicio.\");\n            navigate(\"/\");\n        }\n        setCargandoUsuario(false);\n    }, [navigate]);\n\n    // --- FUNCIÓN PARA OBTENER EL INFORME DE INVENTARIO ACTUAL ---\n    const fetchCurrentReport = useCallback(async () => {\n        if (!currentUser?.id) return;\n\n        setCargandoReporte(true);\n        setErrorReporte('');\n\n        try {\n            const queryParams = new URLSearchParams();\n            if (filterStatus !== 'all') {\n                queryParams.append('filterStatus', filterStatus);\n            }\n\n            const url = `http://localhost:8080/CONI/api/informes/inventario?${queryParams.toString()}`;\n            const response = await fetch(url, { credentials: 'include' });\n\n            if (!response.ok) {\n                const errorData = await response.json();\n                throw new Error(`HTTP error! status: ${response.status}, Mensaje: ${errorData.mensaje || 'Error desconocido'}`);\n            }\n\n            const data = await response.json();\n            setReportData(data);\n        } catch (err) {\n            console.error('Error al obtener el informe actual:', err);\n            setErrorReporte(`No se pudo cargar el informe: ${err.message}.`);\n        } finally {\n            setCargandoReporte(false);\n        }\n    }, [currentUser?.id, filterStatus]);\n\n    // --- FUNCIÓN PARA OBTENER LA LISTA DE INFORMES HISTÓRICOS ---\n    const fetchHistoricalReports = useCallback(async () => {\n        if (!currentUser?.id) return;\n\n        setCargandoHistorico(true);\n        setErrorHistorico('');\n\n        try {\n            const url = `http://localhost:8080/CONI/api/informes/historico`;\n            const response = await fetch(url, { credentials: 'include' });\n\n            if (!response.ok) {\n                const errorData = await response.json();\n                throw new Error(`HTTP error! status: ${response.status}, Mensaje: ${errorData.mensaje || 'Error desconocido'}`);\n            }\n\n            const data = await response.json();\n            setHistoricalReports(data);\n        } catch (err) {\n            console.error('Error al obtener informes históricos:', err);\n            setErrorHistorico(`No se pudieron cargar los informes históricos: ${err.message}.`);\n        } finally {\n            setCargandoHistorico(false);\n        }\n    }, [currentUser?.id]);\n\n    // --- EFECTO PARA CARGAR EL INFORME ACTUAL Y LOS HISTÓRICOS AL MONTAR/CAMBIAR FILTRO ---\n    useEffect(() => {\n        if (currentUser) {\n            fetchCurrentReport();\n            fetchHistoricalReports();\n        }\n    }, [currentUser, fetchCurrentReport, fetchHistoricalReports]);\n\n    // --- FUNCIÓN PARA GUARDAR Y DESCARGAR EL INFORME ACTUAL ---\n    const handleGenerateAndDownload = async () => {\n        if (reportData.length === 0) {\n            alert(\"No hay datos para generar el informe.\");\n            return;\n        }\n\n        // 1. Guardar el informe en la base de datos\n        try {\n            const reportToSave = {\n                estadoFiltro: filterStatus,\n                reporteJson: JSON.stringify(reportData) // Convertir el array de objetos a una cadena JSON\n            };\n\n            const response = await fetch('http://localhost:8080/CONI/api/informes/guardar', {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify(reportToSave),\n                credentials: 'include'\n            });\n\n            const data = await response.json();\n\n            if (response.ok) {\n                alert(data.mensaje);\n                fetchHistoricalReports(); // Recargar la lista de informes históricos\n            } else {\n                alert(`Error al guardar informe: ${data.mensaje || 'Ocurrió un error desconocido.'}`);\n            }\n        } catch (error) {\n            console.error('Error al guardar el informe:', error);\n            alert('Error de conexión con el servidor al guardar el informe.');\n        }\n\n        // 2. Descargar el informe como Excel\n        exportToExcel(reportData, `Informe_Inventario_${filterStatus}_${new Date().toISOString().slice(0, 10)}`);\n    };\n\n    // --- FUNCIÓN PARA DESCARGAR UN INFORME HISTÓRICO ESPECÍFICO ---\n    const handleDownloadHistorical = async (reportId, filename) => {\n        if (!currentUser?.id) {\n            alert(\"Usuario no autenticado.\");\n            return;\n        }\n        try {\n            const url = `http://localhost:8080/CONI/api/informes/historico?id=${reportId}`;\n            const response = await fetch(url, { credentials: 'include' });\n\n            if (!response.ok) {\n                const errorData = await response.json();\n                throw new Error(`HTTP error! status: ${response.status}, Mensaje: ${errorData.mensaje || 'Error desconocido'}`);\n            }\n\n            const data = await response.json(); // Esto ya debería ser el JSON del reporte\n            exportToExcel(data, filename);\n        } catch (err) {\n            console.error('Error al descargar informe histórico:', err);\n            alert(`No se pudo descargar el informe histórico: ${err.message}.`);\n        }\n    };\n\n    // --- FUNCIÓN PARA EXPORTAR DATOS A EXCEL ---\n    const exportToExcel = (data, filename) => {\n        const ws = XLSX.utils.json_to_sheet(data);\n        const wb = XLSX.utils.book_new();\n        XLSX.utils.book_append_sheet(wb, ws, \"Informe\");\n        XLSX.writeFile(wb, `${filename}.xlsx`);\n    };\n\n    // --- FUNCIÓN PARA VER DETALLES DE UN INFORME HISTÓRICO EN UN MODAL ---\n    const handleViewHistorical = async (reportId) => {\n        if (!currentUser?.id) {\n            alert(\"Usuario no autenticado.\");\n            return;\n        }\n        try {\n            const url = `http://localhost:8080/CONI/api/informes/historico?id=${reportId}`;\n            const response = await fetch(url, { credentials: 'include' });\n\n            if (!response.ok) {\n                const errorData = await response.json();\n                throw new Error(`HTTP error! status: ${response.status}, Mensaje: ${errorData.mensaje || 'Error desconocido'}`);\n            }\n\n            const data = await response.json(); // Esto ya debería ser el JSON del reporte\n            setSelectedHistoricalReportData(data);\n            setIsHistoricalModalOpen(true);\n        } catch (err) {\n            console.error('Error al ver informe histórico:', err);\n            alert(`No se pudo cargar el informe histórico: ${err.message}.`);\n        }\n    };\n\n    const handleCloseHistoricalModal = () => {\n        setIsHistoricalModalOpen(false);\n        setSelectedHistoricalReportData(null);\n    };\n\n    // --- FUNCIÓN PARA CERRAR SESIÓN ---\n    const handleLogout = async () => {\n        try {\n            const response = await fetch(\"http://localhost:8080/CONI/LogoutServlet\", {\n                method: \"GET\",\n                credentials: \"include\"\n            });\n            if (response.ok) {\n                localStorage.removeItem(\"usuarioLogueado\");\n                localStorage.removeItem(\"rol\");\n                localStorage.removeItem(\"idUsuario\");\n                localStorage.removeItem(\"cargoEmpleado\");\n                sessionStorage.clear();\n                localStorage.setItem(\"logoutMessage\", \"Sesión cerrada exitosamente\");\n                navigate(\"/\");\n            } else {\n                console.error(\"Error al cerrar sesión, status:\", response.status);\n            }\n        } catch (error) {\n            console.error(\"Error al cerrar sesión\", error);\n        }\n    };\n\n    return (\n        <div className=\"informe-modulo\">\n            <header className=\"encabezado\">\n                <img src={logo} className=\"imagen-encabezado\" alt=\"Logo CONI\" />\n                <div className=\"barra-superior\">\n                    <nav>\n                        <ul>\n                            <li><button onClick={handleLogout}>Cerrar sesión</button></li>\n                        </ul>\n                    </nav>\n                </div>\n            </header>\n\n            <main>\n                <h2>Generar Informes</h2>\n                {cargandoUsuario ? (\n                    <p>Cargando información del usuario...</p>\n                ) : (\n                    <>\n                        <div className=\"filtros-container\">\n                            <label htmlFor=\"filterStatus\">Filtrar por Estado:</label>\n                            <select\n                                id=\"filterStatus\"\n                                value={filterStatus}\n                                onChange={(e) => setFilterStatus(e.target.value)}\n                            >\n                                {assignmentStatusOptions.map(option => (\n                                    <option key={option.value} value={option.value}>{option.label}</option>\n                                ))}\n                            </select>\n                            <button onClick={fetchCurrentReport}>Actualizar Reporte</button>\n                        </div>\n\n                        <div className=\"seccion-informe\">\n                            <h3>Informe de Inventario Actual</h3>\n                            {cargandoReporte && <p>Cargando reporte...</p>}\n                            {errorReporte && <p className=\"error-mensaje\">{errorReporte}</p>}\n                            {!cargandoReporte && !errorReporte && reportData.length === 0 && (\n                                <p>No hay datos disponibles para el informe actual con los filtros seleccionados.</p>\n                            )}\n                            {!cargandoReporte && reportData.length > 0 && (\n                                <>\n                                    <table className=\"tabla-reporte\">\n                                        <thead>\n                                            <tr>\n                                                <th>ID</th>\n                                                <th>Categoría</th>\n                                                <th>Tipo</th>\n                                                <th>Marca</th>\n                                                <th>Serial</th>\n                                                <th>RAM</th>\n                                                <th>Disco</th>\n                                                <th>Procesador</th>\n                                                <th>Estado Asignación</th>\n                                                <th>Asignado A</th>\n                                                <th>Fecha Asignación</th>\n                                            </tr>\n                                        </thead>\n                                        <tbody>\n                                            {reportData.map((item) => (\n                                                <tr key={`${item.categoria}-${item.id}`}>\n                                                    <td>{item.id}</td>\n                                                    <td>{item.categoria}</td>\n                                                    <td>{item.tipo}</td>\n                                                    <td>{item.marca}</td>\n                                                    <td>{item.serial}</td>\n                                                    <td>{item.ram || 'N/A'}</td>\n                                                    <td>{item.disco || 'N/A'}</td>\n                                                    <td>{item.procesador || 'N/A'}</td>\n                                                    <td>{item.estadoAsignacion}</td>\n                                                    <td>{item.asignadoA}</td>\n                                                    <td>{item.fechaAsignacion ? new Date(item.fechaAsignacion).toLocaleString() : 'N/A'}</td>\n                                                </tr>\n                                            ))}\n                                        </tbody>\n                                    </table>\n                                    <button onClick={handleGenerateAndDownload} className=\"btn-descargar\">Generar y Descargar Excel</button>\n                                </>\n                            )}\n                        </div>\n\n                        <div className=\"seccion-historico\">\n                            <h3>Informes Históricos Guardados</h3>\n                            {cargandoHistorico && <p>Cargando informes históricos...</p>}\n                            {errorHistorico && <p className=\"error-mensaje\">{errorHistorico}</p>}\n                            {!cargandoHistorico && historicalReports.length === 0 && (\n                                <p>No hay informes históricos guardados.</p>\n                            )}\n                            {!cargandoHistorico && historicalReports.length > 0 && (\n                                <ul className=\"lista-historicos\">\n                                    {historicalReports.map(reporte => (\n                                        <li key={reporte.id}>\n                                            <p><strong>ID:</strong> {reporte.id}</p>\n                                            <p><strong>Fecha Guardado:</strong> {new Date(reporte.fechaGuardado).toLocaleString()}</p>\n                                            <p><strong>Estado de Filtro:</strong> {reporte.estadoFiltro}</p>\n                                            <div className=\"acciones-historico\">\n                                                <button onClick={() => handleViewHistorical(reporte.id)}>Ver Reporte</button>\n                                                <button onClick={() => handleDownloadHistorical(reporte.id, `Informe_Historico_${reporte.id}`)}>Descargar Excel</button>\n                                            </div>\n                                        </li>\n                                    ))}\n                                </ul>\n                            )}\n                        </div>\n\n                        {/* Modal para ver el informe histórico completo */}\n                        {isHistoricalModalOpen && selectedHistoricalReportData && (\n                            <div className=\"modal\">\n                                <div className=\"modal-content\">\n                                    <h3>Detalles del Informe Histórico</h3>\n                                    <div className=\"tabla-modal-wrapper\">\n                                        <table className=\"tabla-modal\">\n                                            <thead>\n                                                <tr>\n                                                    <th>ID</th>\n                                                    <th>Categoría</th>\n                                                    <th>Tipo</th>\n                                                    <th>Marca</th>\n                                                    <th>Serial</th>\n                                                    <th>RAM</th>\n                                                    <th>Disco</th>\n                                                    <th>Procesador</th>\n                                                    <th>Estado Asignación</th>\n                                                    <th>Asignado A</th>\n                                                    <th>Fecha Asignación</th>\n                                                </tr>\n                                            </thead>\n                                            <tbody>\n                                                {selectedHistoricalReportData.map((item) => (\n                                                    <tr key={`${item.categoria}-${item.id}`}>\n                                                        <td>{item.id}</td>\n                                                        <td>{item.categoria}</td>\n                                                        <td>{item.tipo}</td>\n                                                        <td>{item.marca}</td>\n                                                        <td>{item.serial}</td>\n                                                        <td>{item.ram || 'N/A'}</td>\n                                                        <td>{item.disco || 'N/A'}</td>\n                                                        <td>{item.procesador || 'N/A'}</td>\n                                                        <td>{item.estadoAsignacion}</td>\n                                                        <td>{item.asignadoA}</td>\n                                                        <td>{item.fechaAsignacion ? new Date(item.fechaAsignacion).toLocaleString() : 'N/A'}</td>\n                                                    </tr>\n                                                ))}\n                                            </tbody>\n                                        </table>\n                                    </div>\n                                    <div className=\"modal-actions\">\n                                        <button type=\"button\" className=\"btn-cancelar\" onClick={handleCloseHistoricalModal}>Cerrar</button>\n                                    </div>\n                                </div>\n                            </div>\n                        )}\n                    </>\n                )}\n            </main>\n        </div>\n    );\n};\n\nexport default InformeModulo;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}