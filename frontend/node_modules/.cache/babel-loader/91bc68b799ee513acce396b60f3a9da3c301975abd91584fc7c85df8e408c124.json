{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import logo from'../img/ESLOGAN CONI.png';import empleadosGif from'../img/empleados.gif';import gestionarUsuarioGif from'../img/gestionar usuario.gif';import generarInformeGif from'../img/generar informe.gif';import'./estilos.css';// Asegúrate que el CSS esté importado\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PerfilAdmin=()=>{const navigate=useNavigate();// Estado para guardar los datos del usuario.\nconst[usuarioLogueadoData,setUsuarioLogueadoData]=useState(null);useEffect(()=>{try{// 1. Intentamos obtener el objeto de usuario completo del localStorage.\nconst storedUserJSON=localStorage.getItem(\"usuarioLogueado\");if(storedUserJSON){// Convertimos el texto JSON a objeto de JavaScript.\nconst parsedUser=JSON.parse(storedUserJSON);setUsuarioLogueadoData(parsedUser);// 2. Verificamos el rol. Si el rol es INCORRECTO, redirigimos.\n//    Si el rol es \"admin\", simplemente continuamos.\nif((parsedUser===null||parsedUser===void 0?void 0:parsedUser.rolAutenticacion)!==\"admin\"){console.log(\"perfilAdmin: Rol incorrecto, redirigiendo a login.\");navigate(\"/login\");}// *** CORRECCIÓN APLICADA AQUÍ ***\n// El bloque `else` anterior ha sido eliminado para que el 'admin' continúe.\n}else{// 3. Si NO hay datos en localStorage, el usuario no está logueado.\nconsole.log(\"perfilAdmin: No hay datos de sesión, redirigiendo a login.\");navigate(\"/login\");}}catch(e){console.error(\"Error al leer datos del usuario de localStorage\",e);// En caso de error, redirigimos para evitar que la página se rompa.\nnavigate(\"/login\");}},[navigate]);// Dependencia del hook\nconst handleLogout=()=>{// Limpiamos el localStorage para simular el cierre de sesión.\nlocalStorage.removeItem(\"usuarioLogueado\");localStorage.setItem(\"logoutMessage\",\"Sesión cerrada exitosamente\");// Redirigir a la página de inicio de sesión\nnavigate(\"/login\");};// Mostrar \"Cargando\" mientras se obtienen los datos.\nif(!usuarioLogueadoData){return/*#__PURE__*/_jsx(\"div\",{children:\"Cargando perfil...\"});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"header\",{className:\"encabezado\",children:[/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"Eslogan de CONI - Gesti\\xF3n de inventario\",className:\"imagen-encabezado\"}),/*#__PURE__*/_jsx(\"div\",{className:\"barra-superior\",children:/*#__PURE__*/_jsx(\"nav\",{children:/*#__PURE__*/_jsx(\"ul\",{children:/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,children:\"Cerrar sesi\\xF3n\"})})})})})]}),/*#__PURE__*/_jsx(\"h2\",{className:\"titulo perfil-administrador\",children:\"\\xBFQu\\xE9 deseas gestionar hoy?\"}),/*#__PURE__*/_jsx(\"div\",{className:\"contenidoPerfilAdmin\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container gestion-administrador\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"gestion-usuario\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"/gestionUsuario\",children:/*#__PURE__*/_jsx(\"img\",{src:gestionarUsuarioGif,alt:\"Gestionar Usuario\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"container text-usuarios\",children:[/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/gestionUsuario\",children:\"Usuarios\"})}),/*#__PURE__*/_jsx(\"p\",{children:\"Administra y controla los perfiles de acceso al sistema\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"gestion-empleados\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"/EmpleadoForm\",children:/*#__PURE__*/_jsx(\"img\",{src:empleadosGif,alt:\"gestion_empleados\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"container text-empleados\",children:[/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/EmpleadoForm\",children:\"Empleados\"})}),/*#__PURE__*/_jsx(\"p\",{children:\"Acceso a la gesti\\xF3n de informaci\\xF3n sobre los empleados\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"informe\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"/InformeModulo\",children:/*#__PURE__*/_jsx(\"img\",{src:generarInformeGif,alt:\"Generar Informe\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"container text-informe\",children:[/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/InformeModulo\",children:\"Generar informe\"})}),/*#__PURE__*/_jsx(\"p\",{children:\"Obtener informes detallados sobre el estado del inventario\"})]})]})]})})]});};export default PerfilAdmin;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","logo","empleadosGif","gestionarUsuarioGif","generarInformeGif","jsx","_jsx","jsxs","_jsxs","PerfilAdmin","navigate","usuarioLogueadoData","setUsuarioLogueadoData","storedUserJSON","localStorage","getItem","parsedUser","JSON","parse","rolAutenticacion","console","log","e","error","handleLogout","removeItem","setItem","children","className","src","alt","onClick","href"],"sources":["C:/Users/Lenovo/OneDrive/Documentos/SENA/CONI_FUNCIONES 10 NOV/frontend/src/components/perfilAdmin.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport logo from '../img/ESLOGAN CONI.png';\nimport empleadosGif from '../img/empleados.gif';\nimport gestionarUsuarioGif from '../img/gestionar usuario.gif';\nimport generarInformeGif from '../img/generar informe.gif';\nimport './estilos.css'; // Asegúrate que el CSS esté importado\n\nconst PerfilAdmin = () => {\n  const navigate = useNavigate();\n  // Estado para guardar los datos del usuario.\n  const [usuarioLogueadoData, setUsuarioLogueadoData] = useState(null);\n\n  useEffect(() => {\n    try {\n      // 1. Intentamos obtener el objeto de usuario completo del localStorage.\n      const storedUserJSON = localStorage.getItem(\"usuarioLogueado\");\n\n      if (storedUserJSON) {\n        // Convertimos el texto JSON a objeto de JavaScript.\n        const parsedUser = JSON.parse(storedUserJSON);\n        setUsuarioLogueadoData(parsedUser);\n\n        // 2. Verificamos el rol. Si el rol es INCORRECTO, redirigimos.\n        //    Si el rol es \"admin\", simplemente continuamos.\n        if (parsedUser?.rolAutenticacion !== \"admin\") {\n          console.log(\"perfilAdmin: Rol incorrecto, redirigiendo a login.\");\n          navigate(\"/login\");\n        }\n        // *** CORRECCIÓN APLICADA AQUÍ ***\n        // El bloque `else` anterior ha sido eliminado para que el 'admin' continúe.\n\n      } else {\n        // 3. Si NO hay datos en localStorage, el usuario no está logueado.\n        console.log(\"perfilAdmin: No hay datos de sesión, redirigiendo a login.\");\n        navigate(\"/login\");\n      }\n    } catch (e) {\n      console.error(\"Error al leer datos del usuario de localStorage\", e);\n      // En caso de error, redirigimos para evitar que la página se rompa.\n      navigate(\"/login\");\n    }\n  }, [navigate]); // Dependencia del hook\n\n  const handleLogout = () => {\n    // Limpiamos el localStorage para simular el cierre de sesión.\n    localStorage.removeItem(\"usuarioLogueado\");\n    localStorage.setItem(\"logoutMessage\", \"Sesión cerrada exitosamente\");\n    // Redirigir a la página de inicio de sesión\n    navigate(\"/login\");\n  };\n\n  // Mostrar \"Cargando\" mientras se obtienen los datos.\n  if (!usuarioLogueadoData) {\n    return <div>Cargando perfil...</div>;\n  }\n\n  return (\n    <div>\n      <header className=\"encabezado\">\n        <img src={logo} alt=\"Eslogan de CONI - Gestión de inventario\" className=\"imagen-encabezado\" />\n        <div className=\"barra-superior\">\n          <nav>\n            <ul>\n              <li><button onClick={handleLogout}>Cerrar sesión</button></li>\n            </ul>\n          </nav>\n        </div>\n      </header>\n\n      <h2 className=\"titulo perfil-administrador\">¿Qué deseas gestionar hoy?</h2>\n\n      <div className=\"contenidoPerfilAdmin\">\n        <div className=\"container gestion-administrador\">\n\n          <div className=\"gestion-usuario\">\n            <a href=\"/gestionUsuario\">\n              <img src={gestionarUsuarioGif} alt=\"Gestionar Usuario\" />\n            </a>\n            <div className=\"container text-usuarios\">\n              <button><a href=\"/gestionUsuario\">Usuarios</a></button>\n              <p>Administra y controla los perfiles de acceso al sistema</p>\n            </div>\n          </div>\n\n          <div className=\"gestion-empleados\">\n            <a href=\"/EmpleadoForm\"><img src={empleadosGif} alt=\"gestion_empleados\" /></a>\n            <div className=\"container text-empleados\">\n              <button><a href=\"/EmpleadoForm\">Empleados</a></button>\n              <p>Acceso a la gestión de información sobre los empleados</p>\n            </div>\n          </div>\n\n          <div className=\"informe\">\n            <a href=\"/InformeModulo\">\n              <img src={generarInformeGif} alt=\"Generar Informe\" />\n            </a>\n            <div className=\"container text-informe\">\n              <button><a href=\"/InformeModulo\">Generar informe</a></button>\n              <p>Obtener informes detallados sobre el estado del inventario</p>\n            </div>\n          </div>\n\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default PerfilAdmin;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}